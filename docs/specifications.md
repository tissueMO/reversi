# リバーシゲーム仕様書

## 概要

このプロジェクトはリバーシゲームです。プレイヤーは対戦相手と交互に手を打ち、より多くの石を自分の色に変えることを目指します。

## ゲームルール

1. 8×8 のマス目のボード上でプレイします
2. 黒と白の 2 種類の石を使用します
3. ゲームは黒石から開始します
4. 各プレイヤーは交互に石を置いていきます
5. 石は空いているマスに置く必要があります
6. 石は相手の石を挟むことで、挟まれた相手の石を自分の色に変えることができます
7. 少なくとも 1 つの石をひっくり返せる場所にのみ石を置くことができます
8. 石を置ける場所がない場合、相手のターンになります
9. 両プレイヤーとも石を置けなくなったらゲーム終了となります
10. ゲーム終了時、より多くの石を持っているプレイヤーが勝者です

## システム仕様

### 機能一覧

1. **ゲームボードの表示**

   - 8×8 のマス目で構成されたリバーシボード
   - 黒石と白石の表示
   - 石を置ける有効な場所のハイライト表示

2. **プレイヤー情報の表示**

   - プレイヤーと相手の現在の石の数
   - 現在の手番プレイヤーの表示（相手もしくはプレイヤーの石の数とアイコンのハイライトによって表現）
   - プレイヤーの色（黒/白）の表示
   - 初期スコアの表示（初期状態では黒と白がそれぞれ 2 つずつ）

3. **ゲームプレイ**

   - 石を置く操作
   - 石のひっくり返しアニメーション
   - ターン切り替え処理
   - 有効な手がない場合のスキップ処理

4. **ゲーム状態管理**

   - ゲームの初期化
   - ゲーム終了判定
   - 勝敗結果の表示
     - モーダルウィンドウで勝敗結果を表示
     - プレイヤーと相手の石の数をアイコンとともに表示
     - プレイヤー勝利時のクラッカーエフェクト演出
     - 「次のゲームへ」ボタンによる新しいゲームの開始

5. **その他**
   - ゲームリセット機能
   - **デバッグコンソール機能**
     - ブラウザの開発者ツールのコンソールから操作可能なデバッグ用 API
     - `window.__reversiDebug.skipToEndGame()` - ゲーム終了 2 手前までショートカット
     - `window.__reversiDebug.forceGameEnd()` - ゲームを強制終了
     - `window.__reversiDebug.setPlayer(playerNum)` - 手番プレイヤーを設定 (1:黒, 2:白)
   - **CPU 対戦機能**
     - CPU プレイヤーとの対戦が可能
     - CPU の強さは 3 段階（初級、中級、上級）から選択可能

### UI 仕様

1. **ボードデザイン**

   - 緑色のボード背景
   - 黒と白の石
   - 石を置ける位置は半透明の白い丸でハイライト

2. **情報表示**

   - 上部: 相手の石の数とアイコン
   - 下部: プレイヤーの石の数とアイコン

3. **操作性**

   - クリックで石を配置
   - アニメーション中は操作不可
   - 開発者ツールのコンソールからデバッグ操作が可能

4. **アニメーション**

   - 石のひっくり返しアニメーション（回転エフェクト）
   - 同心円状に広がるように時間差でアニメーション
   - プレイヤー勝利時のクラッカーアニメーション（画面中央から放出される紙吹雪効果）

5. **ゲーム結果表示**
   - モーダルウィンドウによる勝敗結果の表示（「あなたの勝ち！」「相手の勝ち！」「引き分け」）
   - プレイヤーと相手の石の数をアイコンとともに表示
   - 「次のゲームへ」ボタンクリックで新しいゲーム開始
   - モーダル外側のクリックでは閉じない仕様（「次のゲームへ」ボタンのみで閉じる）
   - プレイヤー勝利時はモーダル表示と同時にクラッカーエフェクト演出
